package de.upb.crypto.zeroknowledge.helpers;

import org.eclipse.emf.ecore.EObject;
import de.upb.crypto.zeroknowledge.zeroKnowledge.Model
import de.upb.crypto.zeroknowledge.zeroKnowledge.FunctionDefinition
import de.upb.crypto.zeroknowledge.zeroKnowledge.ParameterList
import java.lang.reflect.Parameter
import de.upb.crypto.zeroknowledge.zeroKnowledge.WitnessList

// Contains information about the current branch of the abstract syntax tree
// and all ancestor nodes of the node which receives the BranchState object
class BranchState {
	
	int depth;
	EObject parent;
	boolean inProof;
	boolean inFunctionDefinition;
	boolean inConjunction;
	boolean inDisjunction;
	boolean inComparison;
	boolean inSum;
	boolean inProduct;
	boolean inPower;
	boolean inPowerRightBranch;
	boolean exponentContext;
	
	
	boolean inFunctionCall;
	
	
	new() {
		this.depth = 0;
		this.parent = null;
	}

	
	new(BranchState state) {
		this.depth = state.depth;
		this.parent = state.parent;
		this.exponentContext = state.exponentContext;
	}
	
	
	
	def int getDepth() {return depth;}
	def void setDepth(int depth) {this.depth = depth;}
	
	
	def EObject getParent() {return parent;}
	def void setParent(EObject parent) {this.parent = parent;}
	
	
	def boolean hasProofAncestor() {return this.inProof;}
	def boolean hasFunctionDefinitionAncestor() {return this.inFunctionDefinition;}
	def boolean hasConjunctionAncestor() {return this.inConjunction;}
	def boolean hasDisjunctionAncestor() {return this.inDisjunction;}
	def boolean hasComparisonAncestor() {return this.inComparison;}
	def boolean hasSumAncestor() {return this.inSum;}
	def boolean hasProductAncestor() {return this.inProduct;}
	def boolean hasPowerAncestor() {return this.inPower;}
	def boolean isInPowerRightBranch() {return this.inPowerRightBranch;}
	def boolean hasFunctionCallAncestor() {return this.hasFunctionCallAncestor();}
	
	def void setProofAncestor(boolean inProof) {this.inProof = inProof;}
	def void setFunctionDefinitionAncestor(boolean inFunctionDefinition) {this.inFunctionDefinition = inFunctionDefinition;}
	def void setConjunctionAncestor(boolean inConjunction) {this.inConjunction = inConjunction;}
	def void setDisjunctionAncestor(boolean inDisjunction) {this.inDisjunction = inDisjunction;}
	def void setComparisonAncestor(boolean inComparison) {this.inComparison = inComparison;}
	def void setSumAncestor(boolean inSum) {this.inSum = inSum;}
	def void setProductAncestor(boolean inProduct) {this.inProduct = inProduct;}
	def void setPowerAncestor(boolean inPower) {this.inPower = inPower;}
	def void setInPowerRightBranch(boolean inPowerRightBranch) {this.inPowerRightBranch = inPowerRightBranch;}
	def void setFunctionCallAncestor(boolean inFunctionCall) {this.inFunctionCall = inFunctionCall;}
	
	def void updateGeneral(EObject node) {
		depth++;
		parent = node;
	}
	
	def dispatch void updateState(Model model) {
		updateGeneral(model);
	}
	
	def dispatch void updateState(FunctionDefinition function) {
		updateGeneral(function);
	}
	
	def dispatch void updateState(ParameterList parameterList) {
		updateGeneral(parameterList);
		
	}
	
	def dispatch void updateState(Parameter parameter) {
		updateGeneral(function);
	}
	def dispatch void updateState(WitnessList witnessList) {
		updateGeneral(function);
	}
	def dispatch void updateState(Witness witness) {
		updateGeneral(function);
	}
	def dispatch void updateState(Conjunction conjunction) {
		updateGeneral(function);
	}
	def dispatch void updateState(Disjunction disjunction) {
		updateGeneral(function);
	}
	v
	def dispatch void updateState() {
		updateGeneral(function);
	}
	def dispatch void updateState() {
		updateGeneral(function);
	}
	v
	
	
}
